{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,aAGAC,OAAOC,iBAAiB,QAASC,IAE7B,MAAMC,EAAc,sBAGdC,EAAW,CACbC,MAAOC,SAASC,cAAc,uBAC9BC,QAASF,SAASC,cAAc,4BAChCE,OAAQH,SAASC,cAAc,WAiCnC,SAASG,EAASC,GACdA,EAAEC,iBACF,MAAMP,EAAQD,EAASC,MAAMQ,MACvBL,EAAUJ,EAASI,QAAQK,OAE7BR,GAASG,KACTM,QAAQC,IAAI,UAAUV,eAAmBG,KAZ7CJ,EAASC,MAAMQ,MAAQ,GACvBT,EAASI,QAAQK,MAAQ,IACzB,EAAAf,EAAAkB,QAAOb,KAzBX,WACI,IACI,MAAME,MAAEA,EAAKG,QAAEA,IAAY,EAAAV,EAAAmB,MAAKd,GAChCC,EAASC,MAAMQ,MAAQR,EACvBD,EAASI,QAAQK,MAAQL,EAC3B,MAAOU,GACLJ,QAAQC,IAAI,qBAKpBI,GA8BA,MAAMC,EAAYC,EAAAC,GAAEC,UAAS,MA1BzB,EAAAzB,EAAA0B,MAAKrB,EAAa,CACdE,MAAOD,EAASC,MAAMQ,MACtBL,QAASJ,EAASI,QAAQK,UAwBY,KAG9CT,EAASC,MAAMJ,iBAAiB,QAASmB,GACzChB,EAASI,QAAQP,iBAAiB,QAASmB,GAC3ChB,EAASK,OAAOR,iBAAiB,SAAUU,IACvCD,EAASC","sources":["src/js/03-feedback.js"],"sourcesContent":["import { load, save, remove } from \"./storage\";\nimport _ from \"lodash\";\n\nwindow.addEventListener(\"load\", (event) => {\n    // Name of field in the storage\n    const storageName = \"feedback-form-state\";\n\n    // Refs to elements\n    const elements = {\n        email: document.querySelector('input[name=\"email\"]'),\n        message: document.querySelector('textarea[name=\"message\"]'),\n        button: document.querySelector(\"button\"),\n    };\n\n    // Load saved data\n    function loadData() {\n        try {\n            const { email, message } = load(storageName);\n            elements.email.value = email;\n            elements.message.value = message;\n        } catch (error) {\n            console.log(\"Storage is empty\");\n        }\n    }\n\n    // Load\n    loadData();\n\n    // Save data on typing in the inputs\n    function onInput() {\n        save(storageName, {\n            email: elements.email.value,\n            message: elements.message.value,\n        });\n    }\n\n    // Clear all saved data from storage and clear fields\n    function clearStorage() {\n        elements.email.value = \"\";\n        elements.message.value = \"\";\n        remove(storageName);\n    }\n\n    // Post data\n    function postData(e) {\n        e.preventDefault();\n        const email = elements.email.value;\n        const message = elements.message.value;\n\n        if (email || message) {\n            console.log(`Email: ${email}, Message: ${message}`);\n            clearStorage();\n        }\n    }\n\n    // Throttle on typing\n    const throttled = _.throttle(() => onInput(), 500);\n\n    // Events\n    elements.email.addEventListener(\"input\", throttled);\n    elements.message.addEventListener(\"input\", throttled);\n    elements.button.addEventListener(\"click\", (e) => {\n        postData(e);\n    });\n});\n"],"names":["$5uEKZ","parcelRequire","window","addEventListener","event","storageName","elements","email","document","querySelector","message","button","postData","e","preventDefault","value","console","log","remove","load","error","loadData","throttled","$parcel$interopDefault","$kEUo3","throttle","save"],"version":3,"file":"03-feedback.b5309884.js.map"}